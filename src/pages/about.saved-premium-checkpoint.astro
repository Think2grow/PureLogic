---
import MainLayout from '@/layouts/MainLayout.astro';
import Button from '@/components/Button.astro';
import { siteConfig } from '@/config/site';

const VIDEO_ID = '0846b02a586a6598b14f2f59a5822638';
const POSTER = `https://videodelivery.net/${VIDEO_ID}/thumbnails/thumbnail.jpg?time=166s`;
---

<MainLayout 
  title="About Pure Logic Solutions"
  description="Learn about our company, mission, and commitment to excellence in home remodeling and construction."
>
  <!-- Hero Section -->
  <section class="section-padding bg-white dark:bg-gray-900">
    <div class="container-custom">
      <div class="max-w-4xl mx-auto text-center mb-10">
        <h1 class="heading-xl mb-6">About Pure Logic Solutions</h1>
        <p class="text-xl text-gray-600 dark:text-gray-300">
          Built with integrity, powered by family, engineered for better living.
        </p>
      </div>

      <div class="max-w-5xl mx-auto">
        <div class="relative rounded-2xl border border-brand-base/25 dark:border-brand-base/35 bg-white/80 dark:bg-gray-900/70 backdrop-blur-xl shadow-2xl shadow-brand-dark/15 dark:shadow-black/40 p-3 sm:p-4 overflow-hidden">
          <div class="pointer-events-none absolute -top-24 -left-24 h-56 w-56 rounded-full bg-brand-base/20 blur-3xl"></div>
          <div class="pointer-events-none absolute -bottom-24 -right-16 h-56 w-56 rounded-full bg-brand-dark/25 blur-3xl"></div>

          <div id="about-video" data-video-id={VIDEO_ID} class="relative w-full aspect-video rounded-xl overflow-hidden bg-black border border-white/20 dark:border-white/10">
            <div class="absolute inset-0 pointer-events-none bg-linear-to-b from-brand-base/20 via-transparent to-brand-dark/35"></div>
          <button
            id="about-video-trigger"
            type="button"
            class="absolute inset-0 w-full h-full group cursor-pointer focus:outline-none focus-visible:ring-2 focus-visible:ring-white/80 focus-visible:ring-offset-2 focus-visible:ring-offset-black"
            aria-label="Play introduction video"
          >
            <img
              src={POSTER}
              alt="Video preview"
              class="absolute inset-0 w-full h-full object-cover scale-[1.01] transition duration-500 group-hover:scale-105"
            />

            <div class="absolute inset-0 bg-black/25 transition duration-300 group-hover:bg-black/10"></div>

            <div class="absolute inset-0 flex items-center justify-center">
              <div class="inline-flex items-center gap-3 bg-white/90 backdrop-blur-md rounded-full pl-4 pr-5 py-3 border border-brand-base/25 shadow-xl shadow-brand-dark/25 transition duration-300 group-hover:bg-white">
                <span class="inline-flex items-center justify-center h-10 w-10 rounded-full bg-brand-dark text-white text-base">▶</span>
                <span class="text-sm font-semibold tracking-wide text-brand-dark">Watch Story</span>
              </div>
            </div>
          </button>

          <iframe
            id="about-video-frame"
            class="absolute inset-0 w-full h-full opacity-0 pointer-events-none transition-opacity duration-300"
            src=""
            loading="lazy"
            allowfullscreen>
          </iframe>
        </div>

          <div class="mt-4 px-1 flex items-center justify-between text-xs sm:text-sm text-gray-600 dark:text-gray-300">
            <p>Founder introduction</p>
            <p>Pure Logic Solutions</p>
          </div>
        </div>

        <p class="text-center mt-6 text-gray-600 dark:text-gray-300">
          Hear from Jared Bayless about why Pure Logic Solutions was built differently.
        </p>
      </div>
    </div>
  </section>

  <!-- Our Story -->
  <section class="section-padding bg-gray-50 dark:bg-gray-800">
    <div class="container-custom">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
        <div>
          <h2 class="heading-lg mb-6">Our Story</h2>
          <p class="text-lg text-gray-600 dark:text-gray-300 mb-4">
            Pure Logic Solutions was founded by Jared Bayless, a husband, father of three, and local builder who believes reputation matters more than shortcuts.
          </p>
          <p class="text-lg text-gray-600 dark:text-gray-300 mb-4">
            Danielle Bayless is the foundation of their family and a critical part of the business. Her perspective on health, family, and long-term living helps shape how every project is approached.
          </p>
          <p class="text-lg text-gray-600 dark:text-gray-300">
            This was never meant to be just another contracting company. It was built to prove construction can be structured, clear, and professional.
          </p>
        </div>
        <div class="bg-white dark:bg-gray-900 rounded-xl p-8 border border-gray-100 dark:border-gray-700">
          <h3 class="text-xl font-bold mb-4">The Standard We Build By</h3>
          <p class="text-gray-600 dark:text-gray-300 mb-4">
            Every remodel and full system installation is measured by one question:
          </p>
          <p class="text-2xl font-bold text-brand-base mb-4">“Would we put it in our house?”</p>
          <p class="text-gray-600 dark:text-gray-300">
            If the answer is no, we do not do it. That standard drives every recommendation, material decision, and final detail.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Why We Build Differently -->
  <section class="section-padding bg-white dark:bg-gray-900">
    <div class="container-custom">
      <div class="text-center max-w-3xl mx-auto mb-12">
        <h2 class="heading-lg mb-4">Why Homeowners Choose Us</h2>
        <p class="text-lg text-gray-600 dark:text-gray-300">
          We built our process to solve the issues homeowners are tired of facing.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
        <div class="bg-white dark:bg-gray-900 rounded-xl p-8 border border-gray-100 dark:border-gray-700">
          <div class="w-12 h-12 bg-brand-base/15 rounded-lg flex items-center justify-center mb-4">
            <svg class="w-6 h-6 text-brand-base" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <h3 class="text-lg font-bold mb-3">Clear Communication</h3>
          <p class="text-gray-600 dark:text-gray-400">
            No guessing, no silence. We communicate scope, timelines, and updates clearly from start to finish.
          </p>
        </div>

        <div class="bg-white dark:bg-gray-900 rounded-xl p-8 border border-gray-100 dark:border-gray-700">
          <div class="w-12 h-12 bg-brand-base/15 rounded-lg flex items-center justify-center mb-4">
            <svg class="w-6 h-6 text-brand-base" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
          </div>
          <h3 class="text-lg font-bold mb-3">Structured Planning</h3>
          <p class="text-gray-600 dark:text-gray-400">
            Our work is built on systems, not guesswork, so projects run with clarity and accountability.
          </p>
        </div>

        <div class="bg-white dark:bg-gray-900 rounded-xl p-8 border border-gray-100 dark:border-gray-700">
          <div class="w-12 h-12 bg-brand-base/15 rounded-lg flex items-center justify-center mb-4">
            <svg class="w-6 h-6 text-brand-base" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" />
            </svg>
          </div>
          <h3 class="text-lg font-bold mb-3">Clean Execution</h3>
          <p class="text-gray-600 dark:text-gray-400">
            We focus on systems, flow, and durability, with workmanship designed to perform for years.
          </p>
        </div>

        <div class="bg-white dark:bg-gray-900 rounded-xl p-8 border border-gray-100 dark:border-gray-700">
          <div class="w-12 h-12 bg-brand-base/15 rounded-lg flex items-center justify-center mb-4">
            <svg class="w-6 h-6 text-brand-base" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 12H9m6 0H9m6 0H9m3 5.354a4 4 0 11-8 0" />
            </svg>
          </div>
          <h3 class="text-lg font-bold mb-3">Respect for Your Home</h3>
          <p class="text-gray-600 dark:text-gray-400">
            We show up prepared and respect your home, your time, and your investment every step of the way.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Better Living -->
  <section class="section-padding bg-gray-50 dark:bg-gray-800">
    <div class="container-custom">
      <div class="text-center max-w-3xl mx-auto mb-12">
        <h2 class="heading-lg mb-4">Beyond Construction</h2>
        <p class="text-lg text-gray-600 dark:text-gray-300">
          As the installation partner for Blue Logic Water Systems, we think beyond finishes and into quality of life.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-2xl mx-auto">
        <div class="bg-gray-50 dark:bg-gray-800 rounded-xl p-8 border border-gray-100 dark:border-gray-700">
          <div class="flex items-start mb-4">
            <div class="w-10 h-10 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center mr-4 shrink-0">
              <svg class="w-6 h-6 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
            </div>
            <div>
              <h3 class="text-lg font-bold mb-2">Built for Long-Term Living</h3>
              <p class="text-gray-600 dark:text-gray-400 mb-3">Healthy systems, better flow, and durable performance are part of every recommendation.</p>
              <a 
                href={siteConfig.licenseVerifyUrl}
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center text-brand-base font-semibold hover:opacity-80 transition-opacity"
              >
                Verify Utah License #{siteConfig.utahLicenseNumber}
                <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4m-4-4l-4 4m4-4v6m0-6l4-4m-4 4l-4 4" />
                </svg>
              </a>
            </div>
          </div>
        </div>

        <div class="bg-gray-50 dark:bg-gray-800 rounded-xl p-8 border border-gray-100 dark:border-gray-700">
          <div class="flex items-start mb-4">
            <div class="w-10 h-10 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center mr-4 shrink-0">
              <svg class="w-6 h-6 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
            </div>
            <div>
              <h3 class="text-lg font-bold mb-2">Local Reputation, Local Responsibility</h3>
              <p class="text-gray-600 dark:text-gray-400 mb-3">We live here, raise our families here, and build here. Every project adds to our local reputation.</p>
              <p class="text-sm text-gray-500 dark:text-gray-400">
                If challenges arise, we solve them or communicate them immediately—no overpromises and no disappearing acts.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="section-padding bg-brand-base text-white">
    <div class="container-custom">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="heading-lg mb-6">Looking for Structure, Integrity, and Pure Results?</h2>
        <p class="text-xl mb-8 text-gray-100">
          If you want the cheapest bid, we may not be the right fit. If you want smart execution and a team that treats your home like their own, let’s talk.
        </p>
        <Button href="/contact" variant="primary" size="lg">
          Schedule Your Consultation
        </Button>
      </div>
    </div>
  </section>
</MainLayout>

<script is:inline>
  const initAboutVideo = () => {
    const videoRoot = document.getElementById('about-video');
    const videoTrigger = document.getElementById('about-video-trigger');
    const videoFrame = document.getElementById('about-video-frame');

    if (!videoRoot || !videoTrigger || !videoFrame || videoTrigger.dataset.bound === 'true') {
      return;
    }

    videoTrigger.dataset.bound = 'true';

    const videoId = videoRoot.getAttribute('data-video-id');

    if (!videoId) {
      return;
    }

    const baseSrc = `https://iframe.videodelivery.net/${videoId}`;

    const preloadVideo = () => {
      if (!videoFrame.getAttribute('src') && videoTrigger.dataset.played !== 'true') {
        videoFrame.setAttribute('src', `${baseSrc}?preload=true`);
      }
    };

    if (!document.head.querySelector('link[data-about-video-preconnect="1"]')) {
      const preconnect = document.createElement('link');
      preconnect.rel = 'preconnect';
      preconnect.href = 'https://iframe.videodelivery.net';
      preconnect.crossOrigin = 'anonymous';
      preconnect.setAttribute('data-about-video-preconnect', '1');
      document.head.appendChild(preconnect);
    }

    if (!document.head.querySelector('link[data-about-video-preconnect="2"]')) {
      const preconnect = document.createElement('link');
      preconnect.rel = 'preconnect';
      preconnect.href = 'https://videodelivery.net';
      preconnect.crossOrigin = 'anonymous';
      preconnect.setAttribute('data-about-video-preconnect', '2');
      document.head.appendChild(preconnect);
    }

    if ('requestIdleCallback' in window) {
      window.requestIdleCallback(preloadVideo, { timeout: 1500 });
    } else {
      window.setTimeout(preloadVideo, 450);
    }

    const playVideo = () => {
      const autoplaySrc = `${baseSrc}?autoplay=true`;
      videoFrame.setAttribute('src', autoplaySrc);

      videoFrame.classList.remove('opacity-0', 'pointer-events-none');
      videoFrame.classList.add('opacity-100', 'pointer-events-auto');
      videoTrigger.classList.add('opacity-0', 'pointer-events-none');
      videoTrigger.setAttribute('aria-hidden', 'true');
      videoTrigger.disabled = true;
      videoTrigger.dataset.played = 'true';
    };

    videoTrigger.addEventListener('click', playVideo);
  };

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initAboutVideo, { once: true });
  } else {
    initAboutVideo();
  }

  document.addEventListener('astro:page-load', initAboutVideo);
</script>
